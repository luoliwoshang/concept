# 计算机基础原理

在学习汇编语言之前，需要理解计算机系统的基本工作原理。

## 什么是汇编语言

### 计算机只认识数字
计算机内部只能处理二进制数字（0和1），但人类很难直接编写和理解二进制代码：

```
机器码: 10110000 01100001  (CPU直接执行的二进制)
汇编:   mov al, 97         (人类可读的助记符)
C代码:  char c = 'a';      (更高级的抽象)
```

### 编程语言的层次
```
高级语言 (C, Python, Java)
    ↓ 编译器
汇编语言 (mov, add, jmp)
    ↓ 汇编器  
机器语言 (二进制指令)
    ↓ CPU执行
硬件操作
```

### 从高级语言到机器码的转换示例
```c
// C代码
int a = 5;
int b = 10; 
int c = a + b;
```

```nasm
; 对应的汇编代码
mov eax, 5      ; a = 5
mov ebx, 10     ; b = 10  
add eax, ebx    ; c = a + b
```

```
对应的机器码 (十六进制):
B8 05 00 00 00    ; mov eax, 5
BB 0A 00 00 00    ; mov ebx, 10
01 D8             ; add eax, ebx
```

## CPU的基本工作原理

### CPU内部结构
CPU (中央处理器) 是计算机的"大脑"，主要包含：

- **寄存器**: CPU内部的高速存储单元，类似于工作台上的小盒子
- **ALU (算术逻辑单元)**: 负责执行加减乘除、逻辑运算
- **控制单元**: 控制指令的执行流程
- **缓存**: 临时存储常用数据，速度比内存快

### 指令执行过程 - CPU的工作循环

每条指令的执行都要经过4个步骤：

#### 1. 取指 (Fetch)
CPU从内存中读取下一条要执行的指令
```
内存地址0x1000: mov rax, 5
CPU: "我需要读取并执行这条mov指令"
```

#### 2. 译码 (Decode) 
CPU分析指令，理解它的含义
```
指令: mov rax, 5
CPU分析: 
- 操作类型: 数据移动 (mov)
- 目标: rax寄存器
- 源: 立即数5
- 含义: "把数字5放到rax寄存器里"
```

#### 3. 执行 (Execute)
CPU实际执行这个操作
```
执行前: rax = 随机值 (比如 0x12345678)
执行过程: ALU将立即数5写入rax寄存器
执行后: rax = 5
```

#### 4. 回写 (Write Back)
确保结果正确保存，准备执行下一条指令
```
rax寄存器现在确实存储着值5
更新程序计数器，指向下一条指令
准备开始下一个指令周期
```

### 生活中的类比
这个过程就像按照食谱做菜：

1. **看食谱** (取指) - 读到"加一勺盐"
2. **理解步骤** (译码) - 明白要往锅里放盐
3. **动手操作** (执行) - 实际拿盐撒到锅里
4. **确认完成** (回写) - 盐已经在锅里，准备下一个步骤

每一条汇编指令都要让CPU经历这完整的4个步骤！

## 二进制基础

### 数字表示系统
```
十进制: 42       (人类常用)
二进制: 101010   (计算机内部)
十六进制: 0x2A   (编程中常用的简化表示)
```

### 位和字节的概念
- **1位(bit)**: 最小单位，只能存储0或1
- **1字节(byte)**: 8位，能表示0-255的数字
- **1字(word)**: 16位，2字节
- **1双字(dword)**: 32位，4字节  
- **1四字(qword)**: 64位，8字节

### 为什么理解这些很重要？
- 汇编指令直接操作这些二进制数据
- 寄存器的大小决定了能存储的数据范围
- 内存地址本质上就是很大的二进制数

## 内存概念

### 内存就像一个巨大的储物柜
```
地址    内容
0x1000  05        ; 存储数字5
0x1001  0A        ; 存储数字10  
0x1002  48        ; 存储字符'H'
0x1003  69        ; 存储字符'i'
```

每个地址指向一个字节的存储空间，CPU通过地址来访问数据。

## 下一步学习

理解了这些基础概念后，就可以开始学习：
- [01-basics](../01-basics/) - 汇编语言语法和第一个程序
- [寄存器系统](../01-basics/registers.md) - CPU寄存器详解
- [内存寻址](../01-basics/memory.md) - 如何在汇编中操作内存